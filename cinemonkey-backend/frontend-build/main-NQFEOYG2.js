import{$ as Se,A as At,B as M,C as B,D as ir,E as Ye,F as Me,G as te,H as G,I as nr,J as h,K as l,L as $,M as De,N as W,O as ue,P as jr,Q as Gr,R as m,S as j,T as mt,U as gt,V as J,W as Xe,Y as Hr,Z as $r,_ as Ze,a as ne,aa as or,b as pe,ba as Ie,c as ft,ca as Qe,d as nn,da as re,e as ae,ea as qr,f as Tr,fa as kt,g as Or,ga as sr,h as Nr,ha as ar,i as Pr,ia as Wr,j as Et,ja as zr,k as pt,ka as Mt,l as ke,la as Kr,m as St,ma as Dt,n as je,na as et,o as ve,oa as ur,p as er,pa as Be,q as K,r as Ft,s as ye,sa as Jr,t as tr,ta as Yr,u as we,ua as _e,v as Ee,va as tt,w as Lr,x as Ke,y as rr,z as Je}from"./chunk-45GOO7S5.js";var Xr=ft(()=>{"use strict"});var ei=ft(It=>{"use strict";It.byteLength=sn;It.toByteArray=un;It.fromByteArray=dn;var Ce=[],le=[],on=typeof Uint8Array<"u"?Uint8Array:Array,lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ge=0,Zr=lr.length;Ge<Zr;++Ge)Ce[Ge]=lr[Ge],le[lr.charCodeAt(Ge)]=Ge;var Ge,Zr;le[45]=62;le[95]=63;function Qr(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var i=t===e?0:4-t%4;return[t,i]}function sn(r){var e=Qr(r),t=e[0],i=e[1];return(t+i)*3/4-i}function an(r,e,t){return(e+t)*3/4-t}function un(r){var e,t=Qr(r),i=t[0],n=t[1],o=new on(an(r,i,n)),a=0,F=n>0?i-4:i,c;for(c=0;c<F;c+=4)e=le[r.charCodeAt(c)]<<18|le[r.charCodeAt(c+1)]<<12|le[r.charCodeAt(c+2)]<<6|le[r.charCodeAt(c+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=e&255;return n===2&&(e=le[r.charCodeAt(c)]<<2|le[r.charCodeAt(c+1)]>>4,o[a++]=e&255),n===1&&(e=le[r.charCodeAt(c)]<<10|le[r.charCodeAt(c+1)]<<4|le[r.charCodeAt(c+2)]>>2,o[a++]=e>>8&255,o[a++]=e&255),o}function ln(r){return Ce[r>>18&63]+Ce[r>>12&63]+Ce[r>>6&63]+Ce[r&63]}function cn(r,e,t){for(var i,n=[],o=e;o<t;o+=3)i=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),n.push(ln(i));return n.join("")}function dn(r){for(var e,t=r.length,i=t%3,n=[],o=16383,a=0,F=t-i;a<F;a+=o)n.push(cn(r,a,a+o>F?F:a+o));return i===1?(e=r[t-1],n.push(Ce[e>>2]+Ce[e<<4&63]+"==")):i===2&&(e=(r[t-2]<<8)+r[t-1],n.push(Ce[e>>10]+Ce[e>>4&63]+Ce[e<<2&63]+"=")),n.join("")}});var ti=ft(cr=>{"use strict";cr.read=function(r,e,t,i,n){var o,a,F=n*8-i-1,c=(1<<F)-1,U=c>>1,I=-7,V=t?n-1:0,z=t?-1:1,N=r[e+V];for(V+=z,o=N&(1<<-I)-1,N>>=-I,I+=F;I>0;o=o*256+r[e+V],V+=z,I-=8);for(a=o&(1<<-I)-1,o>>=-I,I+=i;I>0;a=a*256+r[e+V],V+=z,I-=8);if(o===0)o=1-U;else{if(o===c)return a?NaN:(N?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-U}return(N?-1:1)*a*Math.pow(2,o-i)};cr.write=function(r,e,t,i,n,o){var a,F,c,U=o*8-n-1,I=(1<<U)-1,V=I>>1,z=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=i?0:o-1,de=i?1:-1,ze=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(F=isNaN(e)?1:0,a=I):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+V>=1?e+=z/c:e+=z*Math.pow(2,1-V),e*c>=2&&(a++,c/=2),a+V>=I?(F=0,a=I):a+V>=1?(F=(e*c-1)*Math.pow(2,n),a=a+V):(F=e*Math.pow(2,V-1)*Math.pow(2,n),a=0));n>=8;r[t+N]=F&255,N+=de,F/=256,n-=8);for(a=a<<n|F,U+=n;U>0;r[t+N]=a&255,N+=de,a/=256,U-=8);r[t+N-de]|=ze*128}});var pi=ft(it=>{"use strict";var dr=ei(),rt=ti(),ri=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;it.Buffer=d;it.SlowBuffer=vn;it.INSPECT_MAX_BYTES=50;var Bt=2147483647;it.kMaxLength=Bt;d.TYPED_ARRAY_SUPPORT=hn();!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function hn(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function Fe(r){if(r>Bt)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,d.prototype),e}function d(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return mr(r)}return oi(r,e,t)}d.poolSize=8192;function oi(r,e,t){if(typeof r=="string")return pn(r,e);if(ArrayBuffer.isView(r))return mn(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(xe(r,ArrayBuffer)||r&&xe(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(r,SharedArrayBuffer)||r&&xe(r.buffer,SharedArrayBuffer)))return fr(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var i=r.valueOf&&r.valueOf();if(i!=null&&i!==r)return d.from(i,e,t);var n=gn(r);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return d.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}d.from=function(r,e,t){return oi(r,e,t)};Object.setPrototypeOf(d.prototype,Uint8Array.prototype);Object.setPrototypeOf(d,Uint8Array);function si(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function fn(r,e,t){return si(r),r<=0?Fe(r):e!==void 0?typeof t=="string"?Fe(r).fill(e,t):Fe(r).fill(e):Fe(r)}d.alloc=function(r,e,t){return fn(r,e,t)};function mr(r){return si(r),Fe(r<0?0:gr(r)|0)}d.allocUnsafe=function(r){return mr(r)};d.allocUnsafeSlow=function(r){return mr(r)};function pn(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!d.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=ai(r,e)|0,i=Fe(t),n=i.write(r,e);return n!==t&&(i=i.slice(0,n)),i}function hr(r){for(var e=r.length<0?0:gr(r.length)|0,t=Fe(e),i=0;i<e;i+=1)t[i]=r[i]&255;return t}function mn(r){if(xe(r,Uint8Array)){var e=new Uint8Array(r);return fr(e.buffer,e.byteOffset,e.byteLength)}return hr(r)}function fr(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var i;return e===void 0&&t===void 0?i=new Uint8Array(r):t===void 0?i=new Uint8Array(r,e):i=new Uint8Array(r,e,t),Object.setPrototypeOf(i,d.prototype),i}function gn(r){if(d.isBuffer(r)){var e=gr(r.length)|0,t=Fe(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||vr(r.length)?Fe(0):hr(r);if(r.type==="Buffer"&&Array.isArray(r.data))return hr(r.data)}function gr(r){if(r>=Bt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Bt.toString(16)+" bytes");return r|0}function vn(r){return+r!=r&&(r=0),d.alloc(+r)}d.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==d.prototype};d.compare=function(e,t){if(xe(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),xe(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,o=0,a=Math.min(i,n);o<a;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0};d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return d.alloc(0);var i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=d.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var a=e[i];if(xe(a,Uint8Array))o+a.length>n.length?d.from(a).copy(n,o):Uint8Array.prototype.set.call(n,a,o);else if(d.isBuffer(a))a.copy(n,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return n};function ai(r,e){if(d.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||xe(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return pr(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return fi(r).length;default:if(n)return i?-1:pr(r).length;e=(""+e).toLowerCase(),n=!0}}d.byteLength=ai;function yn(r,e,t){var i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return kn(this,e,t);case"utf8":case"utf-8":return li(this,e,t);case"ascii":return Fn(this,e,t);case"latin1":case"binary":return An(this,e,t);case"base64":return En(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mn(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}d.prototype._isBuffer=!0;function He(r,e,t){var i=r[e];r[e]=r[t],r[t]=i}d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)He(this,t,t+1);return this};d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)He(this,t,t+3),He(this,t+1,t+2);return this};d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)He(this,t,t+7),He(this,t+1,t+6),He(this,t+2,t+5),He(this,t+3,t+4);return this};d.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?li(this,0,e):yn.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:d.compare(this,e)===0};d.prototype.inspect=function(){var e="",t=it.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};ri&&(d.prototype[ri]=d.prototype.inspect);d.prototype.compare=function(e,t,i,n,o){if(xe(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),o===void 0&&(o=this.length),t<0||i>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=i)return 0;if(n>=o)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,F=i-t,c=Math.min(a,F),U=this.slice(n,o),I=e.slice(t,i),V=0;V<c;++V)if(U[V]!==I[V]){a=U[V],F=I[V];break}return a<F?-1:F<a?1:0};function ui(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,vr(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=d.from(e,i)),d.isBuffer(e))return e.length===0?-1:ii(r,e,t,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ii(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function ii(r,e,t,i,n){var o=1,a=r.length,F=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,a/=2,F/=2,t/=2}function c(N,de){return o===1?N[de]:N.readUInt16BE(de*o)}var U;if(n){var I=-1;for(U=t;U<a;U++)if(c(r,U)===c(e,I===-1?0:U-I)){if(I===-1&&(I=U),U-I+1===F)return I*o}else I!==-1&&(U-=U-I),I=-1}else for(t+F>a&&(t=a-F),U=t;U>=0;U--){for(var V=!0,z=0;z<F;z++)if(c(r,U+z)!==c(e,z)){V=!1;break}if(V)return U}return-1}d.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1};d.prototype.indexOf=function(e,t,i){return ui(this,e,t,i,!0)};d.prototype.lastIndexOf=function(e,t,i){return ui(this,e,t,i,!1)};function _n(r,e,t,i){t=Number(t)||0;var n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;var o=e.length;i>o/2&&(i=o/2);for(var a=0;a<i;++a){var F=parseInt(e.substr(a*2,2),16);if(vr(F))return a;r[t+a]=F}return a}function Cn(r,e,t,i){return Vt(pr(e,r.length-t),r,t,i)}function xn(r,e,t,i){return Vt(Bn(e),r,t,i)}function bn(r,e,t,i){return Vt(fi(e),r,t,i)}function wn(r,e,t,i){return Vt(Vn(e,r.length-t),r,t,i)}d.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((i===void 0||i>o)&&(i=o),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return _n(this,e,t,i);case"utf8":case"utf-8":return Cn(this,e,t,i);case"ascii":case"latin1":case"binary":return xn(this,e,t,i);case"base64":return bn(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wn(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function En(r,e,t){return e===0&&t===r.length?dr.fromByteArray(r):dr.fromByteArray(r.slice(e,t))}function li(r,e,t){t=Math.min(r.length,t);for(var i=[],n=e;n<t;){var o=r[n],a=null,F=o>239?4:o>223?3:o>191?2:1;if(n+F<=t){var c,U,I,V;switch(F){case 1:o<128&&(a=o);break;case 2:c=r[n+1],(c&192)===128&&(V=(o&31)<<6|c&63,V>127&&(a=V));break;case 3:c=r[n+1],U=r[n+2],(c&192)===128&&(U&192)===128&&(V=(o&15)<<12|(c&63)<<6|U&63,V>2047&&(V<55296||V>57343)&&(a=V));break;case 4:c=r[n+1],U=r[n+2],I=r[n+3],(c&192)===128&&(U&192)===128&&(I&192)===128&&(V=(o&15)<<18|(c&63)<<12|(U&63)<<6|I&63,V>65535&&V<1114112&&(a=V))}}a===null?(a=65533,F=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=F}return Sn(i)}var ni=4096;function Sn(r){var e=r.length;if(e<=ni)return String.fromCharCode.apply(String,r);for(var t="",i=0;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=ni));return t}function Fn(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function An(r,e,t){var i="";t=Math.min(r.length,t);for(var n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function kn(r,e,t){var i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);for(var n="",o=e;o<t;++o)n+=Un[r[o]];return n}function Mn(r,e,t){for(var i=r.slice(e,t),n="",o=0;o<i.length-1;o+=2)n+=String.fromCharCode(i[o]+i[o+1]*256);return n}d.prototype.slice=function(e,t){var i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,d.prototype),n};function Y(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||Y(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n};d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||Y(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n};d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]};d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]|this[e+1]<<8};d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Y(e,2,this.length),this[e]<<8|this[e+1]};d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};d.prototype.readIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||Y(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n};d.prototype.readIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||Y(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a};d.prototype.readInt8=function(e,t){return e=e>>>0,t||Y(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};d.prototype.readInt16LE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};d.prototype.readInt16BE=function(e,t){e=e>>>0,t||Y(e,2,this.length);var i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};d.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};d.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};d.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),rt.read(this,e,!0,23,4)};d.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Y(e,4,this.length),rt.read(this,e,!1,23,4)};d.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),rt.read(this,e,!0,52,8)};d.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Y(e,8,this.length),rt.read(this,e,!1,52,8)};function ie(r,e,t,i,n,o){if(!d.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){var o=Math.pow(2,8*i)-1;ie(this,e,t,i,o,0)}var a=1,F=0;for(this[t]=e&255;++F<i&&(a*=256);)this[t+F]=e/a&255;return t+i};d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){var o=Math.pow(2,8*i)-1;ie(this,e,t,i,o,0)}var a=i-1,F=1;for(this[t+a]=e&255;--a>=0&&(F*=256);)this[t+a]=e/F&255;return t+i};d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,1,255,0),this[t]=e&255,t+1};d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};d.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){var o=Math.pow(2,8*i-1);ie(this,e,t,i,o-1,-o)}var a=0,F=1,c=0;for(this[t]=e&255;++a<i&&(F*=256);)e<0&&c===0&&this[t+a-1]!==0&&(c=1),this[t+a]=(e/F>>0)-c&255;return t+i};d.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){var o=Math.pow(2,8*i-1);ie(this,e,t,i,o-1,-o)}var a=i-1,F=1,c=0;for(this[t+a]=e&255;--a>=0&&(F*=256);)e<0&&c===0&&this[t+a+1]!==0&&(c=1),this[t+a]=(e/F>>0)-c&255;return t+i};d.prototype.writeInt8=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};d.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};d.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};d.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};d.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||ie(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ci(r,e,t,i,n,o){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function di(r,e,t,i,n){return e=+e,t=t>>>0,n||ci(r,e,t,4,34028234663852886e22,-34028234663852886e22),rt.write(r,e,t,i,23,4),t+4}d.prototype.writeFloatLE=function(e,t,i){return di(this,e,t,!0,i)};d.prototype.writeFloatBE=function(e,t,i){return di(this,e,t,!1,i)};function hi(r,e,t,i,n){return e=+e,t=t>>>0,n||ci(r,e,t,8,17976931348623157e292,-17976931348623157e292),rt.write(r,e,t,i,52,8),t+8}d.prototype.writeDoubleLE=function(e,t,i){return hi(this,e,t,!0,i)};d.prototype.writeDoubleBE=function(e,t,i){return hi(this,e,t,!1,i)};d.prototype.copy=function(e,t,i,n){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),o};d.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){var o=e.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<i;++a)this[a]=e;else{var F=d.isBuffer(e)?e:d.from(e,n),c=F.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-t;++a)this[a+t]=F[a%c]}return this};var Dn=/[^+/0-9A-Za-z-_]/g;function In(r){if(r=r.split("=")[0],r=r.trim().replace(Dn,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function pr(r,e){e=e||1/0;for(var t,i=r.length,n=null,o=[],a=0;a<i;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Bn(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Vn(r,e){for(var t,i,n,o=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),i=t>>8,n=t%256,o.push(n),o.push(i);return o}function fi(r){return dr.toByteArray(In(r))}function Vt(r,e,t,i){for(var n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function xe(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function vr(r){return r!==r}var Un=function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var i=t*16,n=0;n<16;++n)e[i+n]=r[t]+r[n];return e}()});var mi=ft((No,Ut)=>{"use strict";(function(){"use strict";var r="input is invalid type",e=typeof window=="object",t=e?window:{};t.JS_SHA256_NO_WINDOW&&(e=!1);var i=!e&&typeof self=="object",n=!t.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;n?t=global:i&&(t=self);var o=!t.JS_SHA256_NO_COMMON_JS&&typeof Ut=="object"&&Ut.exports,a=typeof define=="function"&&define.amd,F=!t.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),U=[-2147483648,8388608,32768,128],I=[24,16,8,0],V=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],z=["hex","array","digest","arrayBuffer"],N=[];(t.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"}),F&&(t.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(f){return typeof f=="object"&&f.buffer&&f.buffer.constructor===ArrayBuffer});var de=function(f,b){return function(D){return new q(b,!0).update(D)[f]()}},ze=function(f){var b=de("hex",f);n&&(b=he(b,f)),b.create=function(){return new q(f)},b.update=function(S){return b.create().update(S)};for(var D=0;D<z.length;++D){var w=z[D];b[w]=de(w,f)}return b},he=function(f,b){var D=Xr(),w=pi().Buffer,S=b?"sha224":"sha256",x;w.from&&!t.JS_SHA256_NO_BUFFER_FROM?x=w.from:x=function(y){return new w(y)};var O=function(y){if(typeof y=="string")return D.createHash(S).update(y,"utf8").digest("hex");if(y==null)throw new Error(r);return y.constructor===ArrayBuffer&&(y=new Uint8Array(y)),Array.isArray(y)||ArrayBuffer.isView(y)||y.constructor===w?D.createHash(S).update(x(y)).digest("hex"):f(y)};return O},wt=function(f,b){return function(D,w){return new Le(D,b,!0).update(w)[f]()}},me=function(f){var b=wt("hex",f);b.create=function(S){return new Le(S,f)},b.update=function(S,x){return b.create(S).update(x)};for(var D=0;D<z.length;++D){var w=z[D];b[w]=wt(w,f)}return b};function q(f,b){b?(N[0]=N[16]=N[1]=N[2]=N[3]=N[4]=N[5]=N[6]=N[7]=N[8]=N[9]=N[10]=N[11]=N[12]=N[13]=N[14]=N[15]=0,this.blocks=N):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=f}q.prototype.update=function(f){if(!this.finalized){var b,D=typeof f;if(D!=="string"){if(D==="object"){if(f===null)throw new Error(r);if(F&&f.constructor===ArrayBuffer)f=new Uint8Array(f);else if(!Array.isArray(f)&&(!F||!ArrayBuffer.isView(f)))throw new Error(r)}else throw new Error(r);b=!0}for(var w,S=0,x,O=f.length,y=this.blocks;S<O;){if(this.hashed&&(this.hashed=!1,y[0]=this.block,this.block=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0),b)for(x=this.start;S<O&&x<64;++S)y[x>>>2]|=f[S]<<I[x++&3];else for(x=this.start;S<O&&x<64;++S)w=f.charCodeAt(S),w<128?y[x>>>2]|=w<<I[x++&3]:w<2048?(y[x>>>2]|=(192|w>>>6)<<I[x++&3],y[x>>>2]|=(128|w&63)<<I[x++&3]):w<55296||w>=57344?(y[x>>>2]|=(224|w>>>12)<<I[x++&3],y[x>>>2]|=(128|w>>>6&63)<<I[x++&3],y[x>>>2]|=(128|w&63)<<I[x++&3]):(w=65536+((w&1023)<<10|f.charCodeAt(++S)&1023),y[x>>>2]|=(240|w>>>18)<<I[x++&3],y[x>>>2]|=(128|w>>>12&63)<<I[x++&3],y[x>>>2]|=(128|w>>>6&63)<<I[x++&3],y[x>>>2]|=(128|w&63)<<I[x++&3]);this.lastByteIndex=x,this.bytes+=x-this.start,x>=64?(this.block=y[16],this.start=x-64,this.hash(),this.hashed=!0):this.start=x}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var f=this.blocks,b=this.lastByteIndex;f[16]=this.block,f[b>>>2]|=U[b&3],this.block=f[16],b>=56&&(this.hashed||this.hash(),f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),f[14]=this.hBytes<<3|this.bytes>>>29,f[15]=this.bytes<<3,this.hash()}},q.prototype.hash=function(){var f=this.h0,b=this.h1,D=this.h2,w=this.h3,S=this.h4,x=this.h5,O=this.h6,y=this.h7,T=this.blocks,H,X,Z,oe,P,fe,s,u,g,C,p;for(H=16;H<64;++H)P=T[H-15],X=(P>>>7|P<<25)^(P>>>18|P<<14)^P>>>3,P=T[H-2],Z=(P>>>17|P<<15)^(P>>>19|P<<13)^P>>>10,T[H]=T[H-16]+X+T[H-7]+Z<<0;for(p=b&D,H=0;H<64;H+=4)this.first?(this.is224?(u=300032,P=T[0]-1413257819,y=P-150054599<<0,w=P+24177077<<0):(u=704751109,P=T[0]-210244248,y=P-1521486534<<0,w=P+143694565<<0),this.first=!1):(X=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),Z=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),u=f&b,oe=u^f&D^p,s=S&x^~S&O,P=y+Z+s+V[H]+T[H],fe=X+oe,y=w+P<<0,w=P+fe<<0),X=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),Z=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),g=w&f,oe=g^w&b^u,s=y&S^~y&x,P=O+Z+s+V[H+1]+T[H+1],fe=X+oe,O=D+P<<0,D=P+fe<<0,X=(D>>>2|D<<30)^(D>>>13|D<<19)^(D>>>22|D<<10),Z=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7),C=D&w,oe=C^D&f^g,s=O&y^~O&S,P=x+Z+s+V[H+2]+T[H+2],fe=X+oe,x=b+P<<0,b=P+fe<<0,X=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),Z=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),p=b&D,oe=p^b&w^C,s=x&O^~x&y,P=S+Z+s+V[H+3]+T[H+3],fe=X+oe,S=f+P<<0,f=P+fe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+f<<0,this.h1=this.h1+b<<0,this.h2=this.h2+D<<0,this.h3=this.h3+w<<0,this.h4=this.h4+S<<0,this.h5=this.h5+x<<0,this.h6=this.h6+O<<0,this.h7=this.h7+y<<0},q.prototype.hex=function(){this.finalize();var f=this.h0,b=this.h1,D=this.h2,w=this.h3,S=this.h4,x=this.h5,O=this.h6,y=this.h7,T=c[f>>>28&15]+c[f>>>24&15]+c[f>>>20&15]+c[f>>>16&15]+c[f>>>12&15]+c[f>>>8&15]+c[f>>>4&15]+c[f&15]+c[b>>>28&15]+c[b>>>24&15]+c[b>>>20&15]+c[b>>>16&15]+c[b>>>12&15]+c[b>>>8&15]+c[b>>>4&15]+c[b&15]+c[D>>>28&15]+c[D>>>24&15]+c[D>>>20&15]+c[D>>>16&15]+c[D>>>12&15]+c[D>>>8&15]+c[D>>>4&15]+c[D&15]+c[w>>>28&15]+c[w>>>24&15]+c[w>>>20&15]+c[w>>>16&15]+c[w>>>12&15]+c[w>>>8&15]+c[w>>>4&15]+c[w&15]+c[S>>>28&15]+c[S>>>24&15]+c[S>>>20&15]+c[S>>>16&15]+c[S>>>12&15]+c[S>>>8&15]+c[S>>>4&15]+c[S&15]+c[x>>>28&15]+c[x>>>24&15]+c[x>>>20&15]+c[x>>>16&15]+c[x>>>12&15]+c[x>>>8&15]+c[x>>>4&15]+c[x&15]+c[O>>>28&15]+c[O>>>24&15]+c[O>>>20&15]+c[O>>>16&15]+c[O>>>12&15]+c[O>>>8&15]+c[O>>>4&15]+c[O&15];return this.is224||(T+=c[y>>>28&15]+c[y>>>24&15]+c[y>>>20&15]+c[y>>>16&15]+c[y>>>12&15]+c[y>>>8&15]+c[y>>>4&15]+c[y&15]),T},q.prototype.toString=q.prototype.hex,q.prototype.digest=function(){this.finalize();var f=this.h0,b=this.h1,D=this.h2,w=this.h3,S=this.h4,x=this.h5,O=this.h6,y=this.h7,T=[f>>>24&255,f>>>16&255,f>>>8&255,f&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255];return this.is224||T.push(y>>>24&255,y>>>16&255,y>>>8&255,y&255),T},q.prototype.array=q.prototype.digest,q.prototype.arrayBuffer=function(){this.finalize();var f=new ArrayBuffer(this.is224?28:32),b=new DataView(f);return b.setUint32(0,this.h0),b.setUint32(4,this.h1),b.setUint32(8,this.h2),b.setUint32(12,this.h3),b.setUint32(16,this.h4),b.setUint32(20,this.h5),b.setUint32(24,this.h6),this.is224||b.setUint32(28,this.h7),f};function Le(f,b,D){var w,S=typeof f;if(S==="string"){var x=[],O=f.length,y=0,T;for(w=0;w<O;++w)T=f.charCodeAt(w),T<128?x[y++]=T:T<2048?(x[y++]=192|T>>>6,x[y++]=128|T&63):T<55296||T>=57344?(x[y++]=224|T>>>12,x[y++]=128|T>>>6&63,x[y++]=128|T&63):(T=65536+((T&1023)<<10|f.charCodeAt(++w)&1023),x[y++]=240|T>>>18,x[y++]=128|T>>>12&63,x[y++]=128|T>>>6&63,x[y++]=128|T&63);f=x}else if(S==="object"){if(f===null)throw new Error(r);if(F&&f.constructor===ArrayBuffer)f=new Uint8Array(f);else if(!Array.isArray(f)&&(!F||!ArrayBuffer.isView(f)))throw new Error(r)}else throw new Error(r);f.length>64&&(f=new q(b,!0).update(f).array());var H=[],X=[];for(w=0;w<64;++w){var Z=f[w]||0;H[w]=92^Z,X[w]=54^Z}q.call(this,b,D),this.update(X),this.oKeyPad=H,this.inner=!0,this.sharedMemory=D}Le.prototype=new q,Le.prototype.finalize=function(){if(q.prototype.finalize.call(this),this.inner){this.inner=!1;var f=this.array();q.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(f),q.prototype.finalize.call(this)}};var ee=ze();ee.sha256=ee,ee.sha224=ze(!0),ee.sha256.hmac=me(),ee.sha224.hmac=me(!0),o?Ut.exports=ee:(t.sha256=ee.sha256,t.sha224=ee.sha224,a&&define(function(){return ee}))})()});var gi=nn(mi(),1);var $e=class extends Error{};$e.prototype.name="InvalidTokenError";function Rn(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function Tn(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Rn(e)}catch{return atob(e)}}function Rt(r,e){if(typeof r!="string")throw new $e("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,i=r.split(".")[t];if(typeof i!="string")throw new $e(`Invalid token specified: missing part #${t+1}`);let n;try{n=Tn(i)}catch(o){throw new $e(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(n)}catch(o){throw new $e(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function yr(r){if(!(this instanceof yr))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,t,i=[],n,o={enable:!0,callbackList:[],interval:5},a=document.getElementsByTagName("script"),F=0;F<a.length;F++)(a[F].src.indexOf("keycloak.js")!==-1||a[F].src.indexOf("keycloak.min.js")!==-1)&&a[F].src.indexOf("version=")!==-1&&(e.iframeVersion=a[F].src.substring(a[F].src.indexOf("version=")+8).split("&")[0]);var c=!0,U=fe(console.info),I=fe(console.warn);e.init=function(s){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,n=P();var u=["default","cordova","cordova-native"];if(s&&u.indexOf(s.adapter)>-1?t=X(s.adapter):s&&typeof s.adapter=="object"?t=s.adapter:window.Cordova||window.cordova?t=X("cordova"):t=X(),s){if(typeof s.useNonce<"u"&&(c=s.useNonce),typeof s.checkLoginIframe<"u"&&(o.enable=s.checkLoginIframe),s.checkLoginIframeInterval&&(o.interval=s.checkLoginIframeInterval),s.onLoad==="login-required"&&(e.loginRequired=!0),s.responseMode)if(s.responseMode==="query"||s.responseMode==="fragment")e.responseMode=s.responseMode;else throw"Invalid value for responseMode";if(s.flow){switch(s.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=s.flow}if(s.timeSkew!=null&&(e.timeSkew=s.timeSkew),s.redirectUri&&(e.redirectUri=s.redirectUri),s.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=s.silentCheckSsoRedirectUri),typeof s.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=s.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof s.pkceMethod<"u"){if(s.pkceMethod!=="S256"&&s.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${s.pkceMethod}.`);e.pkceMethod=s.pkceMethod}else e.pkceMethod="S256";typeof s.enableLogging=="boolean"?e.enableLogging=s.enableLogging:e.enableLogging=!1,s.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof s.scope=="string"&&(e.scope=s.scope),typeof s.acrValues=="string"&&(e.acrValues=s.acrValues),typeof s.messageReceiveTimeout=="number"&&s.messageReceiveTimeout>0?e.messageReceiveTimeout=s.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var g=S(),C=S();C.promise.then(function(){e.onReady&&e.onReady(e.authenticated),g.setSuccess(e.authenticated)}).catch(function(k){g.setError(k)});var p=q();function E(){var k=function(L){L||(R.prompt="none"),s&&s.locale&&(R.locale=s.locale),e.login(R).then(function(){C.setSuccess()}).catch(function(ge){C.setError(ge)})},A=function(){var L=document.createElement("iframe"),ge=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});L.setAttribute("src",ge),L.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),L.setAttribute("title","keycloak-silent-check-sso"),L.style.display="none",document.body.appendChild(L);var Ae=function(se){if(!(se.origin!==window.location.origin||L.contentWindow!==se.source)){var ht=b(se.data);me(ht,C),document.body.removeChild(L),window.removeEventListener("message",Ae)}};window.addEventListener("message",Ae)},R={};switch(s.onLoad){case"check-sso":o.enable?O().then(function(){T().then(function(L){L?C.setSuccess():e.silentCheckSsoRedirectUri?A():k(!1)}).catch(function(L){C.setError(L)})}):e.silentCheckSsoRedirectUri?A():k(!1);break;case"login-required":k(!0);break;default:throw"Invalid value for onLoad"}}function v(){var k=b(window.location.href);if(k&&window.history.replaceState(window.history.state,null,k.newUrl),k&&k.valid)return O().then(function(){me(k,C)}).catch(function(A){C.setError(A)});s?s.token&&s.refreshToken?(ee(s.token,s.refreshToken,s.idToken),o.enable?O().then(function(){T().then(function(A){A?(e.onAuthSuccess&&e.onAuthSuccess(),C.setSuccess(),y()):C.setSuccess()}).catch(function(A){C.setError(A)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),C.setSuccess()}).catch(function(A){e.onAuthError&&e.onAuthError(),s.onLoad?E():C.setError(A)})):s.onLoad?E():C.setSuccess():C.setSuccess()}function _(){var k=S(),A=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",A),k.setSuccess())};return document.addEventListener("readystatechange",A),A(),k.promise}return p.then(function(){_().then(H).then(v).catch(function(k){g.setError(k)})}),p.catch(function(k){g.setError(k)}),g.promise},e.login=function(s){return t.login(s)};function V(s){var u=null,g=window.crypto||window.msCrypto;if(g&&g.getRandomValues&&window.Uint8Array)return u=new Uint8Array(s),g.getRandomValues(u),u;u=new Array(s);for(var C=0;C<u.length;C++)u[C]=Math.floor(256*Math.random());return u}function z(s){return N(s,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function N(s,u){for(var g=V(s),C=new Array(s),p=0;p<s;p++)C[p]=u.charCodeAt(g[p]%u.length);return String.fromCharCode.apply(null,C)}function de(s,u){if(s!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${s}'.`);let g=new Uint8Array(gi.default.arrayBuffer(u));return On(g).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function ze(s){var u={id_token:{acr:s}};return JSON.stringify(u)}e.createLoginUrl=function(s){var u=f(),g=f(),C=t.redirectUri(s),p={state:u,nonce:g,redirectUri:encodeURIComponent(C)};s&&s.prompt&&(p.prompt=s.prompt);var E;s&&s.action=="register"?E=e.endpoints.register():E=e.endpoints.authorize();var v=s&&s.scope||e.scope;v?v.indexOf("openid")===-1&&(v="openid "+v):v="openid";var _=E+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(C)+"&state="+encodeURIComponent(u)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(v);if(c&&(_=_+"&nonce="+encodeURIComponent(g)),s&&s.prompt&&(_+="&prompt="+encodeURIComponent(s.prompt)),s&&s.maxAge&&(_+="&max_age="+encodeURIComponent(s.maxAge)),s&&s.loginHint&&(_+="&login_hint="+encodeURIComponent(s.loginHint)),s&&s.idpHint&&(_+="&kc_idp_hint="+encodeURIComponent(s.idpHint)),s&&s.action&&s.action!="register"&&(_+="&kc_action="+encodeURIComponent(s.action)),s&&s.locale&&(_+="&ui_locales="+encodeURIComponent(s.locale)),s&&s.acr){var k=ze(s.acr);_+="&claims="+encodeURIComponent(k)}if((s&&s.acrValues||e.acrValues)&&(_+="&acr_values="+encodeURIComponent(s.acrValues||e.acrValues)),e.pkceMethod){var A=z(96);p.pkceCodeVerifier=A;var R=de(e.pkceMethod,A);_+="&code_challenge="+R,_+="&code_challenge_method="+e.pkceMethod}return n.add(p),_},e.logout=function(s){return t.logout(s)},e.createLogoutUrl=function(s){if((s?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var g=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(t.redirectUri(s,!1));return e.idToken&&(g+="&id_token_hint="+encodeURIComponent(e.idToken)),g},e.register=function(s){return t.register(s)},e.createRegisterUrl=function(s){return s||(s={}),s.action="register",e.createLoginUrl(s)},e.createAccountUrl=function(s){var u=he(),g=void 0;return typeof u<"u"&&(g=u+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(t.redirectUri(s))),g},e.accountManagement=function(){return t.accountManagement()},e.hasRealmRole=function(s){var u=e.realmAccess;return!!u&&u.roles.indexOf(s)>=0},e.hasResourceRole=function(s,u){if(!e.resourceAccess)return!1;var g=e.resourceAccess[u||e.clientId];return!!g&&g.roles.indexOf(s)>=0},e.loadUserProfile=function(){var s=he()+"/account",u=new XMLHttpRequest;u.open("GET",s,!0),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Authorization","bearer "+e.token);var g=S();return u.onreadystatechange=function(){u.readyState==4&&(u.status==200?(e.profile=JSON.parse(u.responseText),g.setSuccess(e.profile)):g.setError())},u.send(),g.promise},e.loadUserInfo=function(){var s=e.endpoints.userinfo(),u=new XMLHttpRequest;u.open("GET",s,!0),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Authorization","bearer "+e.token);var g=S();return u.onreadystatechange=function(){u.readyState==4&&(u.status==200?(e.userInfo=JSON.parse(u.responseText),g.setSuccess(e.userInfo)):g.setError())},u.send(),g.promise},e.isTokenExpired=function(s){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return U("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var u=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(s){if(isNaN(s))throw"Invalid minValidity";u-=s}return u<0},e.updateToken=function(s){var u=S();if(!e.refreshToken)return u.setError(),u.promise;s=s||5;var g=function(){var p=!1;if(s==-1?(p=!0,U("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(s))&&(p=!0,U("[KEYCLOAK] Refreshing token: token expired")),!p)u.setSuccess(!1);else{var E="grant_type=refresh_token&refresh_token="+e.refreshToken,v=e.endpoints.token();if(i.push(u),i.length==1){var _=new XMLHttpRequest;_.open("POST",v,!0),_.setRequestHeader("Content-type","application/x-www-form-urlencoded"),_.withCredentials=!0,E+="&client_id="+encodeURIComponent(e.clientId);var k=new Date().getTime();_.onreadystatechange=function(){if(_.readyState==4)if(_.status==200){U("[KEYCLOAK] Token refreshed"),k=(k+new Date().getTime())/2;var A=JSON.parse(_.responseText);ee(A.access_token,A.refresh_token,A.id_token,k),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var R=i.pop();R!=null;R=i.pop())R.setSuccess(!0)}else{I("[KEYCLOAK] Failed to refresh token"),_.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var R=i.pop();R!=null;R=i.pop())R.setError(!0)}},_.send(E)}}};if(o.enable){var C=T();C.then(function(){g()}).catch(function(p){u.setError(p)})}else g();return u.promise},e.clearToken=function(){e.token&&(ee(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function he(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function wt(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function me(s,u){var g=s.code,C=s.error,p=s.prompt,E=new Date().getTime();if(s.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(s.kc_action_status),C){if(p!="none"){var v={error:C,error_description:s.error_description};e.onAuthError&&e.onAuthError(v),u&&u.setError(v)}else u&&u.setSuccess();return}else e.flow!="standard"&&(s.access_token||s.id_token)&&R(s.access_token,null,s.id_token,!0);if(e.flow!="implicit"&&g){var _="code="+g+"&grant_type=authorization_code",k=e.endpoints.token(),A=new XMLHttpRequest;A.open("POST",k,!0),A.setRequestHeader("Content-type","application/x-www-form-urlencoded"),_+="&client_id="+encodeURIComponent(e.clientId),_+="&redirect_uri="+s.redirectUri,s.pkceCodeVerifier&&(_+="&code_verifier="+s.pkceCodeVerifier),A.withCredentials=!0,A.onreadystatechange=function(){if(A.readyState==4)if(A.status==200){var L=JSON.parse(A.responseText);R(L.access_token,L.refresh_token,L.id_token,e.flow==="standard"),y()}else e.onAuthError&&e.onAuthError(),u&&u.setError()},A.send(_)}function R(L,ge,Ae,se){E=(E+new Date().getTime())/2,ee(L,ge,Ae,E),c&&e.idTokenParsed&&e.idTokenParsed.nonce!=s.storedNonce?(U("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),u&&u.setError()):se&&(e.onAuthSuccess&&e.onAuthSuccess(),u&&u.setSuccess())}}function q(s){var u=S(),g;r?typeof r=="string"&&(g=r):g="keycloak.json";function C(A){A?e.endpoints={authorize:function(){return A.authorization_endpoint},token:function(){return A.token_endpoint},logout:function(){if(!A.end_session_endpoint)throw"Not supported by the OIDC server";return A.end_session_endpoint},checkSessionIframe:function(){if(!A.check_session_iframe)throw"Not supported by the OIDC server";return A.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!A.userinfo_endpoint)throw"Not supported by the OIDC server";return A.userinfo_endpoint}}:e.endpoints={authorize:function(){return he()+"/protocol/openid-connect/auth"},token:function(){return he()+"/protocol/openid-connect/token"},logout:function(){return he()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var R=he()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(R=R+"?version="+e.iframeVersion),R},thirdPartyCookiesIframe:function(){var R=he()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(R=R+"?version="+e.iframeVersion),R},register:function(){return he()+"/protocol/openid-connect/registrations"},userinfo:function(){return he()+"/protocol/openid-connect/userinfo"}}}if(g){var p=new XMLHttpRequest;p.open("GET",g,!0),p.setRequestHeader("Accept","application/json"),p.onreadystatechange=function(){if(p.readyState==4)if(p.status==200||Le(p)){var A=JSON.parse(p.responseText);e.authServerUrl=A["auth-server-url"],e.realm=A.realm,e.clientId=A.resource,C(null),u.setSuccess()}else u.setError()},p.send()}else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var E=r.oidcProvider;if(E)if(typeof E=="string"){var k;E.charAt(E.length-1)=="/"?k=E+".well-known/openid-configuration":k=E+"/.well-known/openid-configuration";var p=new XMLHttpRequest;p.open("GET",k,!0),p.setRequestHeader("Accept","application/json"),p.onreadystatechange=function(){if(p.readyState==4)if(p.status==200||Le(p)){var R=JSON.parse(p.responseText);C(R),u.setSuccess()}else u.setError()},p.send()}else C(E),u.setSuccess();else{if(!r.url){for(var v=document.getElementsByTagName("script"),_=0;_<v.length;_++)if(v[_].src.match(/.*keycloak\.js/)){r.url=v[_].src.substr(0,v[_].src.indexOf("/js/keycloak.js"));break}}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,C(null),u.setSuccess()}}return u.promise}function Le(s){return s.status==0&&s.responseText&&s.responseURL.startsWith("file:")}function ee(s,u,g,C){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),u?(e.refreshToken=u,e.refreshTokenParsed=Rt(u)):(delete e.refreshToken,delete e.refreshTokenParsed),g?(e.idToken=g,e.idTokenParsed=Rt(g)):(delete e.idToken,delete e.idTokenParsed),s){if(e.token=s,e.tokenParsed=Rt(s),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,C&&(e.timeSkew=Math.floor(C/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(U("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var p=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;U("[KEYCLOAK] Token expires in "+Math.round(p/1e3)+" s"),p<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,p)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function f(){var s="0123456789abcdef",u=N(36,s).split("");u[14]="4",u[19]=s.substr(u[19]&3|8,1),u[8]=u[13]=u[18]=u[23]="-";var g=u.join("");return g}function b(s){var u=D(s);if(u){var g=n.get(u.state);return g&&(u.valid=!0,u.redirectUri=g.redirectUri,u.storedNonce=g.nonce,u.prompt=g.prompt,u.pkceCodeVerifier=g.pkceCodeVerifier),u}}function D(s){var u;switch(e.flow){case"standard":u=["code","state","session_state","kc_action_status","iss"];break;case"implicit":u=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":u=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}u.push("error"),u.push("error_description"),u.push("error_uri");var g=s.indexOf("?"),C=s.indexOf("#"),p,E;if(e.responseMode==="query"&&g!==-1?(p=s.substring(0,g),E=w(s.substring(g+1,C!==-1?C:s.length),u),E.paramsString!==""&&(p+="?"+E.paramsString),C!==-1&&(p+=s.substring(C))):e.responseMode==="fragment"&&C!==-1&&(p=s.substring(0,C),E=w(s.substring(C+1),u),E.paramsString!==""&&(p+="#"+E.paramsString)),E&&E.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((E.oauthParams.code||E.oauthParams.error)&&E.oauthParams.state)return E.oauthParams.newUrl=p,E.oauthParams}else if(e.flow==="implicit"&&(E.oauthParams.access_token||E.oauthParams.error)&&E.oauthParams.state)return E.oauthParams.newUrl=p,E.oauthParams}}function w(s,u){for(var g=s.split("&"),C={paramsString:"",oauthParams:{}},p=0;p<g.length;p++){var E=g[p].indexOf("="),v=g[p].slice(0,E);u.indexOf(v)!==-1?C.oauthParams[v]=g[p].slice(E+1):(C.paramsString!==""&&(C.paramsString+="&"),C.paramsString+=g[p])}return C}function S(){var s={setSuccess:function(u){s.resolve(u)},setError:function(u){s.reject(u)}};return s.promise=new Promise(function(u,g){s.resolve=u,s.reject=g}),s}function x(s,u,g){var C=null,p=new Promise(function(E,v){C=setTimeout(function(){v({error:g||"Promise is not settled within timeout of "+u+"ms"})},u)});return Promise.race([s,p]).finally(function(){clearTimeout(C)})}function O(){var s=S();if(!o.enable||o.iframe)return s.setSuccess(),s.promise;var u=document.createElement("iframe");o.iframe=u,u.onload=function(){var p=e.endpoints.authorize();p.charAt(0)==="/"?o.iframeOrigin=wt():o.iframeOrigin=p.substring(0,p.indexOf("/",8)),s.setSuccess()};var g=e.endpoints.checkSessionIframe();u.setAttribute("src",g),u.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),u.setAttribute("title","keycloak-session-iframe"),u.style.display="none",document.body.appendChild(u);var C=function(p){if(!(p.origin!==o.iframeOrigin||o.iframe.contentWindow!==p.source)&&(p.data=="unchanged"||p.data=="changed"||p.data=="error")){p.data!="unchanged"&&e.clearToken();for(var E=o.callbackList.splice(0,o.callbackList.length),v=E.length-1;v>=0;--v){var _=E[v];p.data=="error"?_.setError():_.setSuccess(p.data=="unchanged")}}};return window.addEventListener("message",C,!1),s.promise}function y(){o.enable&&e.token&&setTimeout(function(){T().then(function(s){s&&y()})},o.interval*1e3)}function T(){var s=S();if(o.iframe&&o.iframeOrigin){var u=e.clientId+" "+(e.sessionId?e.sessionId:"");o.callbackList.push(s);var g=o.iframeOrigin;o.callbackList.length==1&&o.iframe.contentWindow.postMessage(u,g)}else s.setSuccess();return s.promise}function H(){var s=S();if(o.enable||e.silentCheckSsoRedirectUri){var u=document.createElement("iframe");u.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),u.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),u.setAttribute("title","keycloak-3p-check-iframe"),u.style.display="none",document.body.appendChild(u);var g=function(C){u.contentWindow===C.source&&(C.data!=="supported"&&C.data!=="unsupported"||(C.data==="unsupported"&&(I(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),o.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(u),window.removeEventListener("message",g),s.setSuccess()))};window.addEventListener("message",g,!1)}else s.setSuccess();return x(s.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function X(s){if(!s||s=="default")return{login:function(v){return window.location.assign(e.createLoginUrl(v)),S().promise},logout:function(v){return ae(this,null,function*(){if((v?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(v));return}let k=e.createLogoutUrl(v),A=yield fetch(k,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:t.redirectUri(v,!1)})});if(A.redirected){window.location.href=A.url;return}if(A.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")})},register:function(v){return window.location.assign(e.createRegisterUrl(v)),S().promise},accountManagement:function(){var v=e.createAccountUrl();if(typeof v<"u")window.location.href=v;else throw"Not supported by the OIDC server";return S().promise},redirectUri:function(v,_){return v&&v.redirectUri?v.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(s=="cordova"){o.enable=!1;var u=function(v,_,k){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(v,_,k):window.open(v,_,k)},g=function(v){return v&&v.cordovaOptions?Object.keys(v.cordovaOptions).reduce(function(_,k){return _[k]=v.cordovaOptions[k],_},{}):{}},C=function(v){return Object.keys(v).reduce(function(_,k){return _.push(k+"="+v[k]),_},[]).join(",")},p=function(v){var _=g(v);return _.location="no",v&&v.prompt=="none"&&(_.hidden="yes"),C(_)},E=function(){return e.redirectUri||"http://localhost"};return{login:function(v){var _=S(),k=p(v),A=e.createLoginUrl(v),R=u(A,"_blank",k),L=!1,ge=!1,Ae=function(){ge=!0,R.close()};return R.addEventListener("loadstart",function(se){if(se.url.indexOf(E())==0){var ht=b(se.url);me(ht,_),Ae(),L=!0}}),R.addEventListener("loaderror",function(se){if(!L)if(se.url.indexOf(E())==0){var ht=b(se.url);me(ht,_),Ae(),L=!0}else _.setError(),Ae()}),R.addEventListener("exit",function(se){ge||_.setError({reason:"closed_by_user"})}),_.promise},logout:function(v){var _=S(),k=e.createLogoutUrl(v),A=u(k,"_blank","location=no,hidden=yes,clearcache=yes"),R;return A.addEventListener("loadstart",function(L){L.url.indexOf(E())==0&&A.close()}),A.addEventListener("loaderror",function(L){L.url.indexOf(E())==0||(R=!0),A.close()}),A.addEventListener("exit",function(L){R?_.setError():(e.clearToken(),_.setSuccess())}),_.promise},register:function(v){var _=S(),k=e.createRegisterUrl(),A=p(v),R=u(k,"_blank",A);return R.addEventListener("loadstart",function(L){if(L.url.indexOf(E())==0){R.close();var ge=b(L.url);me(ge,_)}}),_.promise},accountManagement:function(){var v=e.createAccountUrl();if(typeof v<"u"){var _=u(v,"_blank","location=no");_.addEventListener("loadstart",function(k){k.url.indexOf(E())==0&&_.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(v){return E()}}}if(s=="cordova-native")return o.enable=!1,{login:function(v){var _=S(),k=e.createLoginUrl(v);return universalLinks.subscribe("keycloak",function(A){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var R=b(A.url);me(R,_)}),window.cordova.plugins.browsertab.openUrl(k),_.promise},logout:function(v){var _=S(),k=e.createLogoutUrl(v);return universalLinks.subscribe("keycloak",function(A){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),_.setSuccess()}),window.cordova.plugins.browsertab.openUrl(k),_.promise},register:function(v){var _=S(),k=e.createRegisterUrl(v);return universalLinks.subscribe("keycloak",function(A){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var R=b(A.url);me(R,_)}),window.cordova.plugins.browsertab.openUrl(k),_.promise},accountManagement:function(){var v=e.createAccountUrl();if(typeof v<"u")window.cordova.plugins.browsertab.openUrl(v);else throw"Not supported by the OIDC server"},redirectUri:function(v){return v&&v.redirectUri?v.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+s}var Z=function(){if(!(this instanceof Z))return new Z;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var s=this;function u(){for(var g=new Date().getTime(),C=0;C<localStorage.length;C++){var p=localStorage.key(C);if(p&&p.indexOf("kc-callback-")==0){var E=localStorage.getItem(p);if(E)try{var v=JSON.parse(E).expires;(!v||v<g)&&localStorage.removeItem(p)}catch{localStorage.removeItem(p)}}}}s.get=function(g){if(g){var C="kc-callback-"+g,p=localStorage.getItem(C);return p&&(localStorage.removeItem(C),p=JSON.parse(p)),u(),p}},s.add=function(g){u();var C="kc-callback-"+g.state;g.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(C,JSON.stringify(g))}},oe=function(){if(!(this instanceof oe))return new oe;var s=this;s.get=function(p){if(p){var E=g("kc-callback-"+p);if(C("kc-callback-"+p,"",u(-100)),E)return JSON.parse(E)}},s.add=function(p){C("kc-callback-"+p.state,JSON.stringify(p),u(60))},s.removeItem=function(p){C(p,"",u(-100))};var u=function(p){var E=new Date;return E.setTime(E.getTime()+p*60*1e3),E},g=function(p){for(var E=p+"=",v=document.cookie.split(";"),_=0;_<v.length;_++){for(var k=v[_];k.charAt(0)==" ";)k=k.substring(1);if(k.indexOf(E)==0)return k.substring(E.length,k.length)}return""},C=function(p,E,v){var _=p+"="+E+"; expires="+v.toUTCString()+"; ";document.cookie=_}};function P(){try{return new Z}catch{}return new oe}function fe(s){return function(){e.enableLogging&&s.apply(console,Array.prototype.slice.call(arguments))}}}function On(r){let e=String.fromCodePoint(...r);return btoa(e)}var be=(()=>{class r{envService;keycloak;_profile;constructor(t){this.envService=t}get userProfile(){return this._profile}init(){return ae(this,null,function*(){this.keycloak=new yr({url:this.envService.keycloakUrl,realm:"cine-monkey",clientId:"cm"});try{let t=yield this.keycloak.init({onLoad:"check-sso",silentCheckSsoRedirectUri:`${window.location.origin}/assets/silent-check-sso.html`,checkLoginIframe:!1});return console.log("[KEYCLOAK] authenticated:",t),t&&(yield this.keycloak.updateToken(0),this._profile=yield this.keycloak.loadUserProfile(),localStorage.setItem("authToken",this.keycloak.token||""),localStorage.setItem("username",this.getUsername()||""),localStorage.setItem("userSub",this.getUserSub()||""),localStorage.setItem("roles",JSON.stringify(this.getUserRoles())),setInterval(()=>{this.keycloak.updateToken(60).then(i=>{i&&(localStorage.setItem("authToken",this.keycloak.token||""),console.log("[KEYCLOAK] Token refreshed"))}).catch(i=>{console.error("[KEYCLOAK] Failed to refresh token",i)})},6e3)),t}catch(t){return console.error("[KEYCLOAK] init error",t),!1}})}login(){return this.keycloak.login()}logout(){this.keycloak.logout({redirectUri:window.location.origin})}getToken(){return this.keycloak?.token??localStorage.getItem("authToken")??void 0}isAuthenticated(){return this.keycloak?.authenticated??!1}isTokenExpired(){return this.keycloak?.isTokenExpired()??!0}accountManagement(){this.keycloak.accountManagement()}getUsername(){return this.keycloak?.tokenParsed?.preferred_username}getKeycloakInstance(){return this.keycloak}getUserSub(){return this.keycloak?.tokenParsed?.sub}getUserRoles(){return this.keycloak?.tokenParsed?.resource_access?.cm?.roles||[]}static \u0275fac=function(i){return new(i||r)(ve(_e))};static \u0275prov=ke({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Nn=()=>["/login"];function Pn(r,e){r&1&&(h(0,"a",11)(1,"mat-icon"),m(2,"person"),l(),h(3,"h3"),m(4,"\u0395\u03AF\u03C3\u03BF\u03B4\u03BF\u03C2"),l()()),r&2&&G("routerLink",Xe(1,Nn))}function Ln(r,e){r&1&&(h(0,"div",12)(1,"h1"),m(2,"Manage Movies"),l()())}function jn(r,e){r&1&&(h(0,"div",13)(1,"h1"),m(2,"Manage Showings"),l()())}function Gn(r,e){r&1&&(h(0,"div",14)(1,"h1"),m(2,"Manage Reservations"),l()())}function Hn(r,e){if(r&1&&(h(0,"h1"),m(1),l()),r&2){let t=ue();M(),j(t.userEmail)}}var yi=(()=>{class r{keycloakService;router;envService;platformId;isLoggedIn=!1;userEmail=null;apiUrl;constructor(t,i,n,o){this.keycloakService=t,this.router=i,this.envService=n,this.platformId=o,this.apiUrl=this.envService.apiUrl}ngOnInit(){return ae(this,null,function*(){this.isBrowser()&&(yield this.keycloakService.init(),this.isLoggedIn=this.keycloakService.isAuthenticated(),this.userEmail=this.keycloakService.getUsername()||null,console.log("User email:",this.userEmail))})}get loggedIn(){return this.keycloakService.isAuthenticated()}logout(){return ae(this,null,function*(){this.keycloakService.logout()})}personal(){return ae(this,null,function*(){this.keycloakService.accountManagement()})}isBrowser(){return qr(this.platformId)}get isAdmin(){return JSON.parse(localStorage.getItem("roles")||"[]").includes("ADMIN")}static \u0275fac=function(i){return new(i||r)(B(be),B(Dt),B(_e),B(Je))};static \u0275cmp=K({type:r,selectors:[["app-root"]],standalone:!0,features:[J],decls:28,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","px-3","sticky-navbar"],["href","#",1,"navbar-brand",2,"padding-left","10px"],[1,"logo-image",3,"src"],[1,"ml-auto"],["class","btn btn-outline-light",3,"routerLink",4,"ngIf"],["class","personal-info-link","routerLink","/manage-movies",4,"ngIf"],["class","personal-info-link","routerLink","/manage-showings",4,"ngIf"],["class","personal-info-link","routerLink","/manage-reservations",4,"ngIf"],[1,"btn","btn-outline-light",3,"click"],[4,"ngIf"],[1,"container","mt-4"],[1,"btn","btn-outline-light",3,"routerLink"],["routerLink","/manage-movies",1,"personal-info-link"],["routerLink","/manage-showings",1,"personal-info-link"],["routerLink","/manage-reservations",1,"personal-info-link"]],template:function(i,n){i&1&&(h(0,"nav",0)(1,"a",1),$(2,"img",2),h(3,"h1"),m(4,"Cine-Monkey"),l()(),h(5,"div",3),te(6,Pn,5,2,"a",4)(7,Ln,3,0,"div",5)(8,jn,3,0,"div",6)(9,Gn,3,0,"div",7),h(10,"a",8),W("click",function(){return n.personal()}),h(11,"mat-icon"),m(12,"person"),l(),te(13,Hn,2,1,"h1",9),l(),h(14,"a",8),W("click",function(){return n.logout()}),h(15,"mat-icon"),m(16,"logout"),l(),m(17,"Logout"),l()()(),h(18,"div",10),$(19,"router-outlet"),l(),h(20,"footer")(21,"p"),m(22,"\xA9 2025 Cine-Monkey."),l(),$(23,"br"),h(24,"p"),m(25,"\u0397 \u03B5\u03C6\u03B1\u03C1\u03BC\u03BF\u03B3\u03AE Cine-Monkey \u03C0\u03C1\u03BF\u03C3\u03C6\u03AD\u03C1\u03B5\u03B9 \u03BC\u03B9\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03BC\u03AD\u03BD\u03B7 \u03BB\u03CD\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03C4\u03B7\u03BD \u03B1\u03C0\u03BF\u03C4\u03B5\u03BB\u03B5\u03C3\u03BC\u03B1\u03C4\u03B9\u03BA\u03AE \u03B4\u03B9\u03B1\u03C7\u03B5\u03AF\u03C1\u03B9\u03C3\u03B7 \u03BA\u03B9\u03BD\u03B7\u03BC\u03B1\u03C4\u03BF\u03B3\u03C1\u03B1\u03C6\u03B9\u03BA\u03CE\u03BD \u03C0\u03C1\u03BF\u03B2\u03BF\u03BB\u03CE\u03BD, \u03BA\u03C1\u03B1\u03C4\u03AE\u03C3\u03B5\u03C9\u03BD \u03BA\u03B1\u03B9 \u03C0\u03C1\u03BF\u03B3\u03C1\u03B1\u03BC\u03BC\u03AC\u03C4\u03C9\u03BD, \u03B5\u03BE\u03B1\u03C3\u03C6\u03B1\u03BB\u03AF\u03B6\u03BF\u03BD\u03C4\u03B1\u03C2 \u03BC\u03B9\u03B1 \u03AC\u03C1\u03B9\u03C3\u03C4\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03C4\u03CC\u03C3\u03BF \u03B3\u03B9\u03B1 \u03C4\u03BF\u03C5\u03C2 \u03B4\u03B9\u03B1\u03C7\u03B5\u03B9\u03C1\u03B9\u03C3\u03C4\u03AD\u03C2 \u03CC\u03C3\u03BF \u03BA\u03B1\u03B9 \u03B3\u03B9\u03B1 \u03C4\u03BF \u03BA\u03BF\u03B9\u03BD\u03CC."),l(),h(26,"p"),m(27," \u039C\u03B5 \u03C4\u03B7 \u03C7\u03C1\u03AE\u03C3\u03B7 \u03C3\u03CD\u03B3\u03C7\u03C1\u03BF\u03BD\u03C9\u03BD \u03C4\u03B5\u03C7\u03BD\u03BF\u03BB\u03BF\u03B3\u03B9\u03CE\u03BD \u03BA\u03B1\u03B9 \u03C0\u03C1\u03C9\u03C4\u03BF\u03C0\u03BF\u03C1\u03B9\u03B1\u03BA\u03CE\u03BD \u03B5\u03C1\u03B3\u03B1\u03BB\u03B5\u03AF\u03C9\u03BD, \u03BF \u03C3\u03C4\u03CC\u03C7\u03BF\u03C2 \u03BC\u03B1\u03C2 \u03B5\u03AF\u03BD\u03B1\u03B9 \u03BD\u03B1 \u03B1\u03C0\u03BB\u03BF\u03C0\u03BF\u03B9\u03AE\u03C3\u03BF\u03C5\u03BC\u03B5 \u03C4\u03B9\u03C2 \u03B4\u03B9\u03B1\u03B4\u03B9\u03BA\u03B1\u03C3\u03AF\u03B5\u03C2 \u03BA\u03B1\u03B9 \u03BD\u03B1 \u03B5\u03BD\u03B9\u03C3\u03C7\u03CD\u03C3\u03BF\u03C5\u03BC\u03B5 \u03C4\u03B7\u03BD \u03B1\u03C0\u03CC\u03B4\u03BF\u03C3\u03B7 \u03C4\u03C9\u03BD \u03B5\u03C0\u03B9\u03C7\u03B5\u03B9\u03C1\u03AE\u03C3\u03B5\u03C9\u03BD \u03C3\u03C4\u03BF\u03BD \u03C7\u03CE\u03C1\u03BF \u03C4\u03BF\u03C5 \u03BA\u03B9\u03BD\u03B7\u03BC\u03B1\u03C4\u03BF\u03B3\u03C1\u03AC\u03C6\u03BF\u03C5."),l()()),i&2&&(M(2),G("src",n.apiUrl+"/posters/LOGO.webp",At),M(4),G("ngIf",!n.loggedIn),M(),G("ngIf",n.isAdmin),M(),G("ngIf",n.isAdmin),M(),G("ngIf",n.isAdmin),M(4),G("ngIf",n.userEmail))},dependencies:[Be,Kr,et,Yr,Jr,re,Qe],styles:[".navbar-brand[_ngcontent-%COMP%]{padding-left:20px;padding-top:10px;gap:1rem;display:flex;margin:.1rem;align-items:center}h1[_ngcontent-%COMP%]{margin:0!important;-webkit-text-fill-color:bisque}h1[_ngcontent-%COMP%]:hover{-webkit-text-fill-color:orange!important}.navbar[_ngcontent-%COMP%]{padding:.5rem 1rem;border-bottom:1px solid rgba(255,255,255,.1);justify-content:space-between;background-color:#171c1b!important}.sticky-navbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000}.footer[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque}.ml-auto[_ngcontent-%COMP%]{align-items:center!important}footer[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque!important;display:flexbox!important;text-align:center!important;justify-content:center;padding-bottom:3rem!important}.personal-info-link[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.2rem}.personal-info-link[_ngcontent-%COMP%]:hover{-webkit-text-fill-color:orange!important}h2[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;text-align:center}"]})}return r})();var Fi=(()=>{class r{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||r)(B(ir),B(rr))}}static{this.\u0275dir=ye({type:r})}}return r})(),$n=(()=>{class r extends Fi{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=Lr(r)))(n||r)}})()}static{this.\u0275dir=ye({type:r,features:[Me]})}}return r})(),Ai=new je("");var qn={provide:Ai,useExisting:pt(()=>Te),multi:!0};function Wn(){let r=or()?or().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var zn=new je(""),Te=(()=>{class r extends Fi{constructor(t,i,n){super(t,i),this._compositionMode=n,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Wn())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||r)(B(ir),B(rr),B(zn,8))}}static{this.\u0275dir=ye({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,n){i&1&&W("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[gt([qn]),Me]})}}return r})();function Ve(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function ki(r){return r!=null&&typeof r.length=="number"}var Fr=new je(""),Ar=new je(""),Kn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Q=class{static min(e){return Jn(e)}static max(e){return Yn(e)}static required(e){return Xn(e)}static requiredTrue(e){return Zn(e)}static email(e){return Qn(e)}static minLength(e){return eo(e)}static maxLength(e){return to(e)}static pattern(e){return ro(e)}static nullValidator(e){return Mi(e)}static compose(e){return Ri(e)}static composeAsync(e){return Ti(e)}};function Jn(r){return e=>{if(Ve(e.value)||Ve(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<r?{min:{min:r,actual:e.value}}:null}}function Yn(r){return e=>{if(Ve(e.value)||Ve(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>r?{max:{max:r,actual:e.value}}:null}}function Xn(r){return Ve(r.value)?{required:!0}:null}function Zn(r){return r.value===!0?null:{required:!0}}function Qn(r){return Ve(r.value)||Kn.test(r.value)?null:{email:!0}}function eo(r){return e=>Ve(e.value)||!ki(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}function to(r){return e=>ki(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}function ro(r){if(!r)return Mi;let e,t;return typeof r=="string"?(t="",r.charAt(0)!=="^"&&(t+="^"),t+=r,r.charAt(r.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=r.toString(),e=r),i=>{if(Ve(i.value))return null;let n=i.value;return e.test(n)?null:{pattern:{requiredPattern:t,actualValue:n}}}}function Mi(r){return null}function Di(r){return r!=null}function Ii(r){return $r(r)?Or(r):r}function Bi(r){let e={};return r.forEach(t=>{e=t!=null?ne(ne({},e),t):e}),Object.keys(e).length===0?null:e}function Vi(r,e){return e.map(t=>t(r))}function io(r){return!r.validate}function Ui(r){return r.map(e=>io(e)?e:t=>e.validate(t))}function Ri(r){if(!r)return null;let e=r.filter(Di);return e.length==0?null:function(t){return Bi(Vi(t,e))}}function kr(r){return r!=null?Ri(Ui(r)):null}function Ti(r){if(!r)return null;let e=r.filter(Di);return e.length==0?null:function(t){let i=Vi(t,e).map(Ii);return Pr(i).pipe(Nr(Bi))}}function Mr(r){return r!=null?Ti(Ui(r)):null}function _i(r,e){return r===null?[e]:Array.isArray(r)?[...r,e]:[r,e]}function Oi(r){return r._rawValidators}function Ni(r){return r._rawAsyncValidators}function Cr(r){return r?Array.isArray(r)?r:[r]:[]}function Lt(r,e){return Array.isArray(r)?r.includes(e):r===e}function Ci(r,e){let t=Cr(e);return Cr(r).forEach(n=>{Lt(t,n)||t.push(n)}),t}function xi(r,e){return Cr(e).filter(t=>!Lt(r,t))}var jt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kr(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ue=class extends jt{get formDirective(){return null}get path(){return null}},bt=class extends jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Gt=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},no={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_s=pe(ne({},no),{"[class.ng-submitted]":"isSubmitted"}),ut=(()=>{class r extends Gt{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||r)(B(bt,2))}}static{this.\u0275dir=ye({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,n){i&2&&nr("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Me]})}}return r})(),Oe=(()=>{class r extends Gt{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||r)(B(Ue,10))}}static{this.\u0275dir=ye({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,n){i&2&&nr("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[Me]})}}return r})();var vt="VALID",Nt="INVALID",nt="PENDING",yt="DISABLED",Re=class{},Ht=class extends Re{constructor(e,t){super(),this.value=e,this.source=t}},Ct=class extends Re{constructor(e,t){super(),this.pristine=e,this.source=t}},xt=class extends Re{constructor(e,t){super(),this.touched=e,this.source=t}},ot=class extends Re{constructor(e,t){super(),this.status=e,this.source=t}},xr=class extends Re{constructor(e){super(),this.source=e}},br=class extends Re{constructor(e){super(),this.source=e}};function Dr(r){return(Wt(r)?r.validators:r)||null}function oo(r){return Array.isArray(r)?kr(r):r||null}function Ir(r,e){return(Wt(e)?e.asyncValidators:r)||null}function so(r){return Array.isArray(r)?Mr(r):r||null}function Wt(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function Pi(r,e,t){let i=r.controls;if(!(e?Object.keys(i):i).length)throw new Et(1e3,"");if(!i[t])throw new Et(1001,"")}function Li(r,e,t){r._forEachChild((i,n)=>{if(t[n]===void 0)throw new Et(1002,"")})}var st=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ze(()=>this.statusReactive()),this.statusReactive=Ye(void 0),this._pristine=Ze(()=>this.pristineReactive()),this.pristineReactive=Ye(!0),this._touched=Ze(()=>this.touchedReactive()),this.touchedReactive=Ye(!1),this._events=new Tr,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Se(this.statusReactive)}set status(e){Se(()=>this.statusReactive.set(e))}get valid(){return this.status===vt}get invalid(){return this.status===Nt}get pending(){return this.status==nt}get disabled(){return this.status===yt}get enabled(){return this.status!==yt}get pristine(){return Se(this.pristineReactive)}set pristine(e){Se(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Se(this.touchedReactive)}set touched(e){Se(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ci(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ci(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xi(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xi(e,this._rawAsyncValidators))}hasValidator(e){return Lt(this._rawValidators,e)}hasAsyncValidator(e){return Lt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(ne({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new xt(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new xt(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(ne({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ct(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(n=>{n.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ct(!0,i))}markAsPending(e={}){this.status=nt;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ot(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(ne({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yt,this.errors=null,this._forEachChild(n=>{n.disable(pe(ne({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ht(this.value,i)),this._events.next(new ot(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(ne({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vt,this._forEachChild(i=>{i.enable(pe(ne({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(ne({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vt||this.status===nt)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ht(this.value,t)),this._events.next(new ot(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(ne({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yt:vt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=nt,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=Ii(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(n,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,n)=>i&&i._find(n),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new ot(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?yt:this.errors?Nt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nt)?nt:this._anyControlsHaveStatus(Nt)?Nt:vt}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),n=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),n&&this._events.next(new Ct(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xt(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wt(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=oo(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=so(this._rawAsyncValidators)}},at=class extends st{constructor(e,t,i){super(Dr(t),Ir(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Li(this,!0,e),Object.keys(e).forEach(i=>{Pi(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let n=this.controls[i];n&&n.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,n)=>{i.reset(e?e[n]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,n)=>((i.enabled||this.disabled)&&(t[n]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((n,o)=>{i=t(i,n,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wr=class extends at{};var zt=new je("CallSetDisabledState",{providedIn:"root",factory:()=>Kt}),Kt="always";function ao(r,e){return[...e.path,r]}function Er(r,e,t=Kt){Br(r,e),e.valueAccessor.writeValue(r.value),(r.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(r.disabled),lo(r,e),ho(r,e),co(r,e),uo(r,e)}function bi(r,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),qt(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function $t(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uo(r,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}function Br(r,e){let t=Oi(r);e.validator!==null?r.setValidators(_i(t,e.validator)):typeof t=="function"&&r.setValidators([t]);let i=Ni(r);e.asyncValidator!==null?r.setAsyncValidators(_i(i,e.asyncValidator)):typeof i=="function"&&r.setAsyncValidators([i]);let n=()=>r.updateValueAndValidity();$t(e._rawValidators,n),$t(e._rawAsyncValidators,n)}function qt(r,e){let t=!1;if(r!==null){if(e.validator!==null){let n=Oi(r);if(Array.isArray(n)&&n.length>0){let o=n.filter(a=>a!==e.validator);o.length!==n.length&&(t=!0,r.setValidators(o))}}if(e.asyncValidator!==null){let n=Ni(r);if(Array.isArray(n)&&n.length>0){let o=n.filter(a=>a!==e.asyncValidator);o.length!==n.length&&(t=!0,r.setAsyncValidators(o))}}}let i=()=>{};return $t(e._rawValidators,i),$t(e._rawAsyncValidators,i),t}function lo(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&ji(r,e)})}function co(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&ji(r,e),r.updateOn!=="submit"&&r.markAsTouched()})}function ji(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function ho(r,e){let t=(i,n)=>{e.valueAccessor.writeValue(i),n&&e.viewToModelUpdate(i)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}function Gi(r,e){r==null,Br(r,e)}function fo(r,e){return qt(r,e)}function po(r,e){if(!r.hasOwnProperty("model"))return!1;let t=r.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function mo(r){return Object.getPrototypeOf(r.constructor)===$n}function Hi(r,e){r._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function go(r,e){if(!e)return null;Array.isArray(e);let t,i,n;return e.forEach(o=>{o.constructor===Te?t=o:mo(o)?i=o:n=o}),n||i||t||null}function vo(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}var yo={provide:Ue,useExisting:pt(()=>Vr)},_t=Promise.resolve(),Vr=(()=>{class r extends Ue{get submitted(){return Se(this.submittedReactive)}constructor(t,i,n){super(),this.callSetDisabledState=n,this._submitted=Ze(()=>this.submittedReactive()),this.submittedReactive=Ye(!1),this._directives=new Set,this.ngSubmit=new Ke,this.form=new at({},kr(t),Mr(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){_t.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Er(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){_t.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){_t.then(()=>{let i=this._findContainer(t.path),n=new at({});Gi(n,t),i.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){_t.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){_t.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Hi(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||r)(B(Fr,10),B(Ar,10),B(zt,8))}}static{this.\u0275dir=ye({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,n){i&1&&W("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gt([yo]),Me]})}}return r})();function wi(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function Ei(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Pt=class extends st{constructor(e=null,t,i){super(Dr(t),Ir(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wt(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ei(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wi(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wi(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ei(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _o=r=>r instanceof Pt;var Ne=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=ye({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return r})();var $i=new je("");var Co={provide:Ue,useExisting:pt(()=>qe)},qe=(()=>{class r extends Ue{get submitted(){return Se(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,n){super(),this.callSetDisabledState=n,this._submitted=Ze(()=>this._submittedReactive()),this._submittedReactive=Ye(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ke,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return Er(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){bi(t.control||null,t,!1),vo(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),Hi(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new xr(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new br(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,n=this.form.get(t.path);i!==n&&(bi(i||null,t),_o(n)&&(Er(n,t,this.callSetDisabledState),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);Gi(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&fo(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Br(this.form,this),this._oldForm&&qt(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||r)(B(Fr,10),B(Ar,10),B(zt,8))}}static{this.\u0275dir=ye({type:r,selectors:[["","formGroup",""]],hostBindings:function(i,n){i&1&&W("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gt([Co]),Me,tr]})}}return r})();var xo={provide:bt,useExisting:pt(()=>We)},We=(()=>{class r extends bt{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,i,n,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ke,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=go(this,o)}ngOnChanges(t){this._added||this._setUpControl(),po(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ao(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||r)(B(Ue,13),B(Fr,10),B(Ar,10),B(Ai,10),B($i,8))}}static{this.\u0275dir=ye({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[gt([xo]),Me,tr]})}}return r})();var qi=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ft({type:r})}static{this.\u0275inj=St({})}}return r})(),Sr=class extends st{constructor(e,t,i){super(Dr(t),Ir(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),t&&(this.controls.splice(n,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Li(this,!1,e),e.forEach((i,n)=>{Pi(this,!1,n),this.at(n).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,n)=>{this.at(n)&&this.at(n).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,n)=>{i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Si(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var lt=(()=>{class r{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new r;return t.useNonNullable=!0,t}group(t,i=null){let n=this._reduceControls(t),o={};return Si(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new at(n,o)}record(t,i=null){let n=this._reduceControls(t);return new wr(n,i)}control(t,i,n){let o={};return this.useNonNullable?(Si(i)?o=i:(o.validators=i,o.asyncValidators=n),new Pt(t,pe(ne({},o),{nonNullable:!0}))):new Pt(t,i,n)}array(t,i,n){let o=t.map(a=>this._createControl(a));return new Sr(o,i,n)}_reduceControls(t){let i={};return Object.keys(t).forEach(n=>{i[n]=this._createControl(t[n])}),i}_createControl(t){if(t instanceof Pt)return t;if(t instanceof st)return t;if(Array.isArray(t)){let i=t[0],n=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,n,o)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=ke({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Jt=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:zt,useValue:t.callSetDisabledState??Kt}]}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ft({type:r})}static{this.\u0275inj=St({imports:[qi]})}}return r})(),ct=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:$i,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:zt,useValue:t.callSetDisabledState??Kt}]}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ft({type:r})}static{this.\u0275inj=St({imports:[qi]})}}return r})();var dt=class{id;state;showingDate;showingRoom;showingMovie;constructor(e,t,i,n,o){this.id=e,this.state=t,this.showingDate=i,this.showingRoom=n,this.showingMovie=o}};var Pe=class{title;poster;director;duration;description;genre;constructor(e,t,i,n,o,a){this.title=e,this.poster=t,this.director=i,this.duration=n,this.description=o,this.genre=a}};var Xt=(()=>{class r{http;envService;platformId;apiUrl;constructor(t,i,n){this.http=t,this.envService=i,this.platformId=n,this.apiUrl=this.envService.apiUrl}addShowing(t){return this.http.post(`${this.apiUrl}/api/showings/save`,t)}getShowings(){return this.http.get(`${this.apiUrl}/api/showings`)}getMovieShowings(t){return this.http.get(`${this.apiUrl}/api/movies/${t}/showings`)}deleteShowing(t){return this.http.delete(`${this.apiUrl}/api/showings/${t}`)}static \u0275fac=function(i){return new(i||r)(ve(kt),ve(_e),ve(Je))};static \u0275prov=ke({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function wo(r,e){if(r&1){let t=De();h(0,"tr")(1,"td"),m(2),l(),h(3,"td"),m(4),l(),h(5,"td"),m(6),l(),h(7,"td"),m(8),l(),h(9,"td"),m(10),l(),h(11,"td")(12,"button",14),m(13,"Edit"),l(),h(14,"button",15),W("click",function(){let n=we(t).$implicit,o=ue();return Ee(o.deleteShowing(n.id))}),m(15,"Delete"),l()()()}if(r&2){let t=e.$implicit;M(2),j(t.id),M(2),j(t.state),M(2),j(t.showingRoom),M(2),j(t.showingMovie.title),M(2),j(t.showingDate)}}function Eo(r,e){r&1&&(h(0,"div",16),m(1," Please enter a valid name. "),l())}var zi=(()=>{class r{showingService;fb;showings=[];movie=new Pe("test","test","test",1,"test","test");showing=new dt(1,"test","test",1,this.movie);myForm;constructor(t,i){this.showingService=t,this.fb=i}ngOnInit(){this.fetchShowings(),this.myForm=this.fb.group({email:["",[Q.required,Q.email]],password:["",Q.required],firstname:["",Q.required],lastname:["",Q.required]})}fetchShowings(){this.showingService.getShowings().subscribe(t=>{this.showings=t},t=>{console.log("Error fetching users",t)})}onSubmit(){if(this.myForm.valid){let t=this.myForm.value;this.showing=t,console.log(this.showing),this.showingService.addShowing(this.showing).subscribe({next:i=>{console.log(i),this.fetchShowings()},error:i=>console.error(i)})}}deleteShowing(t){this.showingService.deleteShowing(t).subscribe({next:i=>{console.log("Showing deleted:",i),this.fetchShowings()},error:i=>console.error(i)})}static \u0275fac=function(i){return new(i||r)(B(Xt),B(lt))};static \u0275cmp=K({type:r,selectors:[["app-manage-showings"]],standalone:!0,features:[J],decls:35,vars:3,consts:[[1,"table-container"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["for","emailInput"],["type","text","id","emailInput","formControlName","email",1,"form-control"],["for","passwordInput"],["type","text","id","passwordInput","aria-describedby","passwordHelpBlock","formControlName","password",1,"form-control"],["for","firstnameInput"],["type","text","id","firstnameInput","formControlName","firstname",1,"form-control"],["class","assisst-message",4,"ngIf"],[1,"button-container"],["type","submit",1,"btn","btn-primary-custom"],["type","button",1,"btn","btn-warning"],["type","button",1,"btn","btn-danger",3,"click"],[1,"assisst-message"]],template:function(i,n){if(i&1&&(h(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),m(5,"Id"),l(),h(6,"th",2),m(7,"State"),l(),h(8,"th",2),m(9,"Showing Room"),l(),h(10,"th",2),m(11,"Showing Movie"),l(),h(12,"th",2),m(13,"Showing Date"),l(),h(14,"th",2),m(15,"Action"),l()()(),h(16,"tbody"),te(17,wo,16,5,"tr",3),l()()(),h(18,"form",4),W("ngSubmit",function(){return n.onSubmit()}),h(19,"div")(20,"label",5),m(21,"ShowingRoom:"),l(),$(22,"input",6),l(),h(23,"div")(24,"label",7),m(25,"Showing Movie Title:"),l(),$(26,"input",8),l(),h(27,"div")(28,"label",9),m(29,"Showing Date:"),l(),$(30,"input",10),te(31,Eo,2,0,"div",11),l(),h(32,"div",12)(33,"button",13),m(34,"Add Showing"),l()()()),i&2){let o;M(17),G("ngForOf",n.showings),M(),G("formGroup",n.myForm),M(13),G("ngIf",((o=n.myForm.get("name"))==null?null:o.invalid)&&((o=n.myForm.get("name"))==null?null:o.touched))}},dependencies:[re,Ie,Qe,ct,Ne,Te,ut,Oe,qe,We],styles:[".table-container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem}form[_ngcontent-%COMP%]{background-color:#293230;padding:2rem;border-radius:1rem;justify-content:center;align-items:center;display:flexbox}label[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;margin:.5rem}input[_ngcontent-%COMP%]{margin:.5rem}.button-container[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center;align-items:center}select[_ngcontent-%COMP%]{margin:.5rem}small[_ngcontent-%COMP%]{-webkit-text-fill-color:rgba(255,228,196,.585);margin:.5rem}.assisst-message[_ngcontent-%COMP%]{-webkit-text-fill-color:red;margin:.5rem}"]})}return r})();var Zt=class{reservedShowing;reservedUserSub;id;constructor(e,t,i){this.reservedShowing=e,this.reservedUserSub=t,this.id=i}};var Qt=(()=>{class r{http;envService;platformId;apiUrl;constructor(t,i,n){this.http=t,this.envService=i,this.platformId=n,this.apiUrl=this.envService.apiUrl+"/api"}getReservations(){return this.http.get(`${this.apiUrl}/reservations`)}cancelReservation(t){return this.http.patch(`${this.apiUrl}/reservations/cancel/${t}`,null)}requestCancelation(t){return this.http.patch(`${this.apiUrl}/reservations/requestCancelation/${t}`,null)}deleteReservation(t){return this.http.delete(`${this.apiUrl}/reservations/${t}`)}postReservation(t,i,n){let o=new Zt(null,null,null);return this.http.post(`${this.apiUrl}/reservations/save/${t}-${i}-${n}`,o)}getUserReservations(t){return this.http.get(`${this.apiUrl}/users/${t}/reservations`)}static \u0275fac=function(i){return new(i||r)(ve(kt),ve(_e),ve(Je))};static \u0275prov=ke({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function So(r,e){if(r&1&&(h(0,"div",6)(1,"div",7)(2,"h1"),m(3),l(),h(4,"p")(5,"strong"),m(6,"Description: "),l(),m(7),l(),h(8,"p")(9,"strong"),m(10,"Director: "),l(),m(11),l(),h(12,"p")(13,"strong"),m(14,"Duration: "),l(),m(15),l(),h(16,"p")(17,"strong"),m(18,"Genre: "),l(),m(19),l(),h(20,"div",8)(21,"button",9),m(22,"\u0391\u03B3\u03BF\u03C1\u03AC \u0395\u03B9\u03C3\u03B9\u03C4\u03B7\u03C1\u03AF\u03C9\u03BD"),l(),h(23,"button",10),m(24,"\u03A0\u03C1\u03BF\u03B2\u03BF\u03BB\u03AD\u03C2"),l()()(),h(25,"div",11),$(26,"img",12),m(27," /> "),l()()),r&2){let t=ue();M(3),j(t.movie.title),M(4),j(t.movie.description),M(4),mt(" ",t.movie.director,""),M(4),mt("",t.movie.duration," minutes"),M(4),j(t.movie.genre),M(7),jr("alt",t.movie.title),G("src",t.movie.poster,At)}}function Fo(r,e){if(r&1){let t=De();h(0,"tr")(1,"td"),m(2),l(),h(3,"td"),m(4),l(),h(5,"td"),m(6),l(),h(7,"td"),m(8),l(),h(9,"td"),m(10),l(),h(11,"td")(12,"button",13),W("click",function(){let n=we(t).$implicit,o=ue();return Ee(o.onClick(n.id))}),m(13,"Make Reservation"),l()()()}if(r&2){let t=e.$implicit;M(2),j(t.id),M(2),j(t.state),M(2),j(t.showingRoom),M(2),j(t.showingMovie.title),M(2),j(t.showingDate)}}function Ao(r,e){r&1&&(h(0,"p"),m(1,"Loading movie details..."),l())}var Yi=(()=>{class r{route;movieService;showingService;reservationService;router;movie=new Pe("test","test","test",1,"test","test");showings=[];showing=new dt(1,"test","test",1,this.movie);movieTitle;constructor(t,i,n,o,a){this.route=t,this.movieService=i,this.showingService=n,this.reservationService=o,this.router=a}ngOnInit(){this.route.paramMap.subscribe(t=>{this.movieTitle=t.get("title"),this.getMovieDetails()})}fetchMovieShowings(t){this.showingService.getMovieShowings(t).subscribe(i=>{this.showings=i},i=>{console.log("Error fetching showings",i)})}postReservation(t,i,n){this.reservationService.postReservation(t,i,n).subscribe({next:o=>{console.log(o),this.fetchMovieShowings(this.movie.title)},error:o=>console.error(o)})}onClick(t){this.postReservation(localStorage.getItem("userSub"),localStorage.getItem("username"),parseInt(t)),this.router.navigate(["/successfull-reservation"])}getMovieDetails(){this.movieService.getMovieDetails(this.movieTitle).subscribe({next:t=>{this.movie=t,this.fetchMovieShowings(this.movie.title)},error:t=>{console.error("Error fetching movie details",t)}})}static \u0275fac=function(i){return new(i||r)(B(Mt),B(tt),B(Xt),B(Qt),B(Dt))};static \u0275cmp=K({type:r,selectors:[["app-movie-detail"]],standalone:!0,features:[J],decls:21,vars:3,consts:[["loading",""],["class","movie-details-container",4,"ngIf","ngIfElse"],[1,"table-container"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"movie-details-container"],[1,"movie-details-left"],[1,"button-container"],[1,"btn","btn-primary-custom"],[1,"btn","btn-outline-light"],[1,"movie-details-right"],[1,"poster-image",3,"src","alt"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(i,n){if(i&1&&(te(0,So,28,7,"div",1),h(1,"div",2)(2,"table",3)(3,"thead")(4,"tr")(5,"th",4),m(6,"Id"),l(),h(7,"th",4),m(8,"State"),l(),h(9,"th",4),m(10,"Showing Room"),l(),h(11,"th",4),m(12,"Showing Movie"),l(),h(13,"th",4),m(14,"Showing Date"),l(),h(15,"th",4),m(16,"Action"),l()()(),h(17,"tbody"),te(18,Fo,14,5,"tr",5),l()()(),te(19,Ao,2,0,"ng-template",null,0,Hr)),i&2){let o=Gr(20);G("ngIf",n.movie)("ngIfElse",o),M(18),G("ngForOf",n.showings)}},dependencies:[re,Ie,Qe,Be],styles:[".movie-details-container[_ngcontent-%COMP%]{display:flex;background-color:#293230;color:#fff;padding:2rem;gap:5rem;box-sizing:border-box;min-height:80vh;border-radius:1rem;margin-bottom:2rem}.movie-details-left[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:end;padding-bottom:5rem}.movie-details-right[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;justify-content:center}.poster-image[_ngcontent-%COMP%]{border-radius:1rem;max-height:1000px;width:auto;object-fit:contain;display:block;box-shadow:2px 2px 5px #0000004d}.button-container[_ngcontent-%COMP%]{display:flex;padding:.5rem;gap:1rem}.table-container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem}form[_ngcontent-%COMP%]{background-color:#293230;padding:2rem;border-radius:1rem;justify-content:center;align-items:center;display:flexbox}label[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;margin:.5rem}input[_ngcontent-%COMP%]{margin:.5rem}.button-container[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center;align-items:center}select[_ngcontent-%COMP%]{margin:.5rem}small[_ngcontent-%COMP%]{-webkit-text-fill-color:rgba(255,228,196,.585);margin:.5rem}.assisst-message[_ngcontent-%COMP%]{-webkit-text-fill-color:red;margin:.5rem}"]})}return r})();var Xi=(()=>{class r{route;movieService;movieTitle;movie;constructor(t,i){this.route=t,this.movieService=i}ngOnInit(){this.route.paramMap.subscribe(t=>{this.movieTitle=t.get("title"),this.getMovieDetails()})}getMovieDetails(){this.movieService.getMovieDetails(this.movieTitle).subscribe({next:t=>{this.movie=t},error:t=>{console.error("Error fetching movie details",t)}})}static \u0275fac=function(i){return new(i||r)(B(Mt),B(tt))};static \u0275cmp=K({type:r,selectors:[["app-booking"]],standalone:!0,features:[J],decls:10,vars:2,consts:[[1,"booking-container"],[1,"form-group"],["for","name"],["type","text","id","name","name","name",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"h3"),m(2),l(),h(3,"form")(4,"div",1)(5,"label",2),m(6),l(),$(7,"input",3),l(),h(8,"button",4),m(9,"Confirm Booking"),l()()()),i&2&&(M(2),mt("Book Tickets for ",n.movie.title,""),M(4),j(n.movie.name))},dependencies:[re,Jt,Ne,Oe,Vr],styles:[".booking-container[_ngcontent-%COMP%]{min-height:20vh;border-radius:1rem;background-color:#293230;padding:2rem;-webkit-text-fill-color:bisque;justify-content:center!important;align-items:center!important;text-align:center;margin-bottom:2rem}"]})}return r})();var Zi=(()=>{class r{keycloakService;constructor(t){this.keycloakService=t}ngOnInit(){return ae(this,null,function*(){yield this.keycloakService.login()})}static \u0275fac=function(i){return new(i||r)(B(be))};static \u0275cmp=K({type:r,selectors:[["app-login"]],standalone:!0,features:[J],decls:0,vars:0,template:function(i,n){},dependencies:[re,Jt],styles:[".d-flex[_ngcontent-%COMP%]{display:flex;margin:5rem;align-items:center;justify-content:center}.justify-content-center[_ngcontent-%COMP%]{justify-content:center}.align-items-center[_ngcontent-%COMP%]{align-items:center}.card[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;background-color:#171c1b!important;border-radius:1rem;box-shadow:0 4px 8px #0003;height:max-content;width:max-content;margin:15rem}input[_ngcontent-%COMP%]{-webkit-text-fill-color:black}"]})}return r})();function ko(r,e){if(r&1){let t=De();h(0,"tr")(1,"td"),m(2),l(),h(3,"td"),m(4),l(),h(5,"td"),m(6),l(),h(7,"td"),m(8),l(),h(9,"td")(10,"button",13),W("click",function(){let n=we(t).$implicit,o=ue();return Ee(o.requestCancelation(n.id))}),m(11,"Request Cancelation"),l(),h(12,"button",14),W("click",function(){let n=we(t).$implicit,o=ue();return Ee(o.cancelReservation(n.id))}),m(13,"Cancel Reservation"),l()()()}if(r&2){let t=e.$implicit;M(2),j(t.userSub),M(2),j(t.id),M(2),j(t.reservedShowing.id),M(2),j(t.reservationState),M(2),G("disabled",t.reservationState!="ACTIVE"),M(2),G("disabled",t.reservationState!="CANCELATION_REQUESTED")}}var Qi=(()=>{class r{reservationService;fb;reservations=[];myForm;constructor(t,i){this.reservationService=t,this.fb=i}ngOnInit(){this.fetchReservations(),this.myForm=this.fb.group({userEmail:["",Q.required],userSub:["",Q.required],reservedShowingId:["",Q.required]})}fetchReservations(){this.reservationService.getReservations().subscribe({next:t=>this.reservations=t,error:t=>console.error("Error fetching reservations",t)})}onSubmit(){let t=this.myForm.value,i=parseInt(t.reservedShowingId,10),n=t.userSub,o=t.userEmail;if(isNaN(i)||!n){console.error("Invalid input");return}this.reservationService.postReservation(n,o,i).subscribe({next:a=>{console.log("Reservation added:",a),this.fetchReservations(),this.myForm.reset()},error:a=>console.error("Error adding reservation:",a)})}cancelReservation(t){this.reservationService.cancelReservation(t).subscribe({next:()=>this.fetchReservations(),error:i=>console.error(i)})}requestCancelation(t){this.reservationService.requestCancelation(t).subscribe({next:()=>this.fetchReservations(),error:i=>console.error(i)})}deleteReservation(t){this.reservationService.deleteReservation(t).subscribe({next:()=>this.fetchReservations(),error:i=>console.error(i)})}static \u0275fac=function(i){return new(i||r)(B(Qt),B(lt))};static \u0275cmp=K({type:r,selectors:[["app-manage-reservations"]],standalone:!0,features:[J],decls:32,vars:2,consts:[[1,"table-container"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["for","userSub"],["type","text","id","userSub","formControlName","userSub",1,"form-control"],["for","userEmail"],["type","text","id","userEmail","formControlName","userEmail",1,"form-control"],["for","idInput"],["type","text","id","idInput","formControlName","reservedShowingId",1,"form-control"],[1,"button-container"],["type","submit",1,"btn","btn-primary-custom"],["type","button",1,"btn","btn-warning",3,"click","disabled"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),m(5,"Reserved User"),l(),h(6,"th",2),m(7,"Reservation Id"),l(),h(8,"th",2),m(9,"Reserved Showing Id"),l(),h(10,"th",2),m(11,"Reservation State"),l(),h(12,"th",2),m(13,"Action"),l()()(),h(14,"tbody"),te(15,ko,14,6,"tr",3),l()()(),h(16,"form",4),W("ngSubmit",function(){return n.onSubmit()}),h(17,"div")(18,"label",5),m(19,"User Sub:"),l(),$(20,"input",6),l(),h(21,"div")(22,"label",7),m(23,"User Email:"),l(),$(24,"input",8),l(),h(25,"div")(26,"label",9),m(27,"Showing Id:"),l(),$(28,"input",10),l(),h(29,"div",11)(30,"button",12),m(31,"Add Reservation"),l()()()),i&2&&(M(15),G("ngForOf",n.reservations),M(),G("formGroup",n.myForm))},dependencies:[re,Ie,ct,Ne,Te,ut,Oe,qe,We],styles:[".table-container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem}form[_ngcontent-%COMP%]{background-color:#293230;padding:2rem;border-radius:1rem;justify-content:center;align-items:center;display:flexbox}label[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;margin:.5rem}input[_ngcontent-%COMP%]{margin:.5rem}.button-container[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center;align-items:center}select[_ngcontent-%COMP%]{margin:.5rem}small[_ngcontent-%COMP%]{-webkit-text-fill-color:rgba(255,228,196,.585);margin:.5rem}.assisst-message[_ngcontent-%COMP%]{-webkit-text-fill-color:red;margin:.5rem}"]})}return r})();function Mo(r,e){if(r&1){let t=De();h(0,"tr")(1,"td"),m(2),l(),h(3,"td"),m(4),l(),h(5,"td"),m(6),l(),h(7,"td"),m(8),l(),h(9,"td"),m(10),l(),h(11,"td")(12,"button",15),m(13,"Edit"),l(),h(14,"button",16),W("click",function(){let n=we(t).$implicit,o=ue();return Ee(o.deleteMovie(n.title))}),m(15,"Delete"),l()()()}if(r&2){let t=e.$implicit;M(2),j(t.poster),M(2),j(t.title),M(2),j(t.director),M(2),j(t.duration),M(2),j(t.genre)}}var en=(()=>{class r{movieService;fb;movies=[];movieForm;movie=new Pe("test","test","test",1,"test","test");constructor(t,i){this.movieService=t,this.fb=i}ngOnInit(){this.fetchMovies(),this.movieForm=this.fb.group({titleInput:["",[Q.required]],posterInput:["",Q.required],directorInput:["",Q.required],durationInput:["",Q.required]})}fetchMovies(){this.movieService.getMovies().subscribe(t=>{this.movies=t},t=>{console.log("Error fetching users",t)})}onSubmit(){if(this.movieForm.valid){let t=this.movieForm.value;this.movie=t,console.log(this.movie),this.movieService.addMovie(this.movie).subscribe({next:i=>{console.log(i),this.fetchMovies()},error:i=>console.error(i)})}}deleteMovie(t){this.movieService.deleteMovie(t).subscribe({next:i=>{console.log("Movie deleted:",i),this.fetchMovies()},error:i=>console.error(i)})}static \u0275fac=function(i){return new(i||r)(B(tt),B(lt))};static \u0275cmp=K({type:r,selectors:[["app-manage-movies"]],standalone:!0,features:[J],decls:40,vars:2,consts:[[1,"table-container"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],["for","titleInput"],["type","text","id","titleInput","formControlName","titleInput",1,"form-control"],["for","posterInput"],["type","text","id","posterInput","id","posterInput","formControlName","posterInput",1,"form-control"],["for","directorInput"],["type","text","id","directorInput","formControlName","directorInput",1,"form-control"],["for","durationInput"],["type","text","id","posterInput","id","durationInput","formControlName","durationInput",1,"form-control"],[1,"button-container"],["type","submit",1,"btn","btn-primary-custom"],["type","button",1,"btn","btn-warning"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),m(5,"Poster"),l(),h(6,"th",2),m(7,"Title"),l(),h(8,"th",2),m(9,"Director"),l(),h(10,"th",2),m(11,"Duration"),l(),h(12,"th",2),m(13,"Genre"),l(),h(14,"th",2),m(15,"Action"),l()()(),h(16,"tbody"),te(17,Mo,16,5,"tr",3),l()()(),h(18,"form",4),W("ngSubmit",function(){return n.onSubmit()}),h(19,"h2"),m(20,"Add a movie"),l(),h(21,"div")(22,"label",5),m(23,"Title:"),l(),$(24,"input",6),l(),h(25,"div")(26,"label",7),m(27,"Poster url:"),l(),$(28,"input",8),l(),h(29,"div")(30,"label",9),m(31,"Director:"),l(),$(32,"input",10),l(),h(33,"div")(34,"label",11),m(35,"Duration:"),l(),$(36,"input",12),l(),h(37,"div",13)(38,"button",14),m(39,"Add Movie"),l()()()),i&2&&(M(17),G("ngForOf",n.movies),M(),G("formGroup",n.movieForm))},dependencies:[re,Ie,ct,Ne,Te,ut,Oe,qe,We],styles:[".table-container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem}form[_ngcontent-%COMP%]{background-color:#293230;padding:2rem;border-radius:1rem;justify-content:center;align-items:center;display:flexbox}label[_ngcontent-%COMP%]{-webkit-text-fill-color:bisque;margin:.5rem}input[_ngcontent-%COMP%]{margin:.5rem}.button-container[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center;align-items:center}select[_ngcontent-%COMP%]{margin:.5rem}small[_ngcontent-%COMP%]{-webkit-text-fill-color:rgba(255,228,196,.585);margin:.5rem}.assisst-message[_ngcontent-%COMP%]{-webkit-text-fill-color:red;margin:.5rem}"]})}return r})();var Do=()=>["/"],tn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=K({type:r,selectors:[["app-unauthorised"]],standalone:!0,features:[J],decls:5,vars:2,consts:[[1,"container"],[1,"btn","btn-primary-custom",3,"routerLink"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"h1"),m(2,"\u039F\u03C5\u03C0\u03C2 \u0394\u03B5\u03BD \u03AD\u03C7\u03B5\u03C4\u03B5 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7 \u03C3\u03B5 \u03B1\u03C5\u03C4\u03CC\u03BD \u03C4\u03BF\u03BD \u03C0\u03CC\u03C1\u03BF !"),l(),h(3,"a",1),m(4," \u03A0\u03AF\u03C3\u03C9 \u03C3\u03C4\u03B7\u03BD \u0391\u03C1\u03C7\u03B9\u03BA\u03AE \u03A3\u03B5\u03BB\u03AF\u03B4\u03B1 ..."),l()()),i&2&&(M(3),G("routerLink",Xe(1,Do)))},dependencies:[Be,et],styles:[".container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem;-webkit-text-fill-color:bisque;justify-content:center;align-items:center;display:flexbox;text-align:center}"]})}return r})();var Io=()=>["/"],rn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=K({type:r,selectors:[["app-successfull-reservation"]],standalone:!0,features:[J],decls:6,vars:2,consts:[[1,"table-container"],[1,"button-container"],[1,"btn","btn-primary-custom",3,"routerLink"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"h2"),m(2,"Reservation Added Successfully!"),l(),h(3,"div",1)(4,"a",2),m(5," \u03A0\u03AF\u03C3\u03C9 \u03C3\u03C4\u03B7\u03BD \u0391\u03C1\u03C7\u03B9\u03BA\u03AE \u03A3\u03B5\u03BB\u03AF\u03B4\u03B1 ..."),l()()()),i&2&&(M(4),G("routerLink",Xe(1,Io)))},dependencies:[Be,et],styles:[".table-container[_ngcontent-%COMP%]{min-height:20vh;padding:3rem;background-color:#293230;border-radius:1rem;margin-bottom:2rem;justify-content:center!important;align-items:center!important;display:flexbox}h2[_ngcontent-%COMP%]{text-align:center;-webkit-text-fill-color:bisque}.button-container[_ngcontent-%COMP%]{margin-top:2rem;display:flexbox;text-align:center!important;justify-content:center!important;align-items:center!important}"]})}return r})();var Ur=[{path:"",loadComponent:()=>import("./chunk-WUQWEVF3.js").then(r=>r.MovieListComponent)},{path:"movie/:title",component:Yi},{path:"booking/:id",component:Xi},{path:"manage-showings",component:zi},{path:"manage-reservations",component:Qi},{path:"manage-movies",component:en},{path:"successfull-reservation",component:rn},{path:"unauthorised",component:tn},{path:"login",component:Zi}];var Rr=(r,e)=>{let i=er(be).getToken();if(i){let n=r.clone({headers:r.headers.set("Authorization",`Bearer ${i}`)});return e(n)}return e(r)};function Bo(){return ae(this,null,function*(){let e=(yield zr({providers:[sr(ar([Rr])),ur(Ur),_e,be]})).injector.get(be);if(!(yield e.init())){console.warn("[MAIN] Not authenticated. Redirecting to login..."),yield e.login();return}console.log("[MAIN] Authenticated. Bootstrapping app..."),yield Wr(yi,{providers:[sr(ar([Rr])),ur(Ur),{provide:be,useValue:e}]})})}Bo().catch(r=>{console.error("[MAIN] Unexpected error during app bootstrap",r)});
